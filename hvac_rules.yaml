domain: "HVAC_Integrity"
version: "1.1.0"

concepts:
  - name: "Proposal"
    description: "The top-level container for a quote"
  - name: "Room"
    description: "A room requiring HVAC evaluation"
    properties:
      - name: "is_server_room"
        type: "boolean"
      - name: "requires_pmoc"
        type: "boolean"
      - name: "btu_capacity"
        type: "integer"

relations:
  - name: "has_room"
    from: "Proposal"
    to: "Room"
    type: "contains"

constraints:
  - name: "SERVER_ROOM_MANDATORY_PMOC"
    description: "Every server room requires PMOC by law (NBR 16401)"
    logic: "ifL(Room.is_server_room, Room.requires_pmoc)"
  - name: "CAPACITY_THRESHOLD_PMOC"
    description: "Rooms exceeding 60,000 BTU require PMOC"
    logic: "ifL(Room.btu_capacity > 60000, Room.requires_pmoc)"

verification:
  test_cases:
    - input: "10m2 Server Closet"
      expect: "requires_pmoc = True"
